module.exports=[21507,e=>{"use strict";var t=e.i(48511),a=e.i(70263),r=e.i(96861),s=e.i(72356);class n extends r.BaseError{constructor({callbackSelector:e,cause:t,data:a,extraData:r,sender:n,urls:o}){super(t.shortMessage||"An error occurred while fetching for an offchain result.",{cause:t,metaMessages:[...t.metaMessages||[],t.metaMessages?.length?"":[],"Offchain Gateway Call:",o&&["  Gateway URL(s):",...o.map(e=>`    ${(0,s.getUrl)(e)}`)],`  Sender: ${n}`,`  Data: ${a}`,`  Callback selector: ${e}`,`  Extra data: ${r}`].flat(),name:"OffchainLookupError"})}}class o extends r.BaseError{constructor({result:e,url:t}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${(0,s.getUrl)(t)}`,`Response: ${(0,a.stringify)(e)}`],name:"OffchainLookupResponseMalformedError"})}}class i extends r.BaseError{constructor({sender:e,to:t}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${t}`,`OffchainLookup sender address: ${e}`],name:"OffchainLookupSenderMismatchError"})}}var c=e.i(41286),d=e.i(72236),u=e.i(66359),l=e.i(96212),f=e.i(83732),p=e.i(2623);let h={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function y(e,{blockNumber:a,blockTag:r,data:s,to:o}){let{args:c}=(0,d.decodeErrorResult)({data:s,abi:[h]}),[p,y,g,w,E]=c,{ccipRead:b}=e,k=b&&"function"==typeof b?.request?b.request:m;try{if(!(0,l.isAddressEqual)(o,p))throw new i({sender:p,to:o});let s=await k({data:g,sender:p,urls:y}),{data:n}=await (0,t.call)(e,{blockNumber:a,blockTag:r,data:(0,f.concat)([w,(0,u.encodeAbiParameters)([{type:"bytes"},{type:"bytes"}],[s,E])]),to:o});return n}catch(e){throw new n({callbackSelector:w,cause:e,data:s,extraData:E,sender:p,urls:y})}}async function m({data:e,sender:t,urls:r}){let s=Error("An unknown error occurred.");for(let n=0;n<r.length;n++){let i=r[n],d=i.includes("{data}")?"GET":"POST",u="POST"===d?{data:e,sender:t}:void 0,l="POST"===d?{"Content-Type":"application/json"}:{};try{let r,n=await fetch(i.replace("{sender}",t).replace("{data}",e),{body:JSON.stringify(u),headers:l,method:d});if(r=n.headers.get("Content-Type")?.startsWith("application/json")?(await n.json()).data:await n.text(),!n.ok){s=new c.HttpRequestError({body:u,details:r?.error?(0,a.stringify)(r.error):n.statusText,headers:n.headers,status:n.status,url:i});continue}if(!(0,p.isHex)(r)){s=new o({result:r,url:i});continue}return r}catch(e){s=new c.HttpRequestError({body:u,details:e.message,url:i})}}throw s}e.s(["ccipRequest",()=>m,"offchainLookup",()=>y,"offchainLookupAbiItem",0,h,"offchainLookupSignature",0,"0x556f1830"],21507)}];

//# sourceMappingURL=412ab_viem__esm_utils_ccip_2c73de91.js.map